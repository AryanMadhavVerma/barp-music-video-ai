/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/custom_generate/route";
exports.ids = ["app/api/custom_generate/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/http-cookie-agent/dist/utils sync recursive":
/*!*********************************************************!*\
  !*** ./node_modules/http-cookie-agent/dist/utils/ sync ***!
  \*********************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/http-cookie-agent/dist/utils sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?6ccf":
/*!*************************!*\
  !*** deasync (ignored) ***!
  \*************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustom_generate%2Froute&page=%2Fapi%2Fcustom_generate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustom_generate%2Froute.ts&appDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustom_generate%2Froute&page=%2Fapi%2Fcustom_generate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustom_generate%2Froute.ts&appDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_bikramsutar_Desktop_workspace_hackathon_backend_servers_suno_ai_api_src_app_api_custom_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/custom_generate/route.ts */ \"(rsc)/./src/app/api/custom_generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/custom_generate/route\",\n        pathname: \"/api/custom_generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/custom_generate/route\"\n    },\n    resolvedPagePath: \"/Users/bikramsutar/Desktop/workspace/hackathon/backend/servers/suno-ai-api/src/app/api/custom_generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_bikramsutar_Desktop_workspace_hackathon_backend_servers_suno_ai_api_src_app_api_custom_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/custom_generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjdXN0b21fZ2VuZXJhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmN1c3RvbV9nZW5lcmF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmN1c3RvbV9nZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJpa3JhbXN1dGFyJTJGRGVza3RvcCUyRndvcmtzcGFjZSUyRmhhY2thdGhvbiUyRmJhY2tlbmQlMkZzZXJ2ZXJzJTJGc3Vuby1haS1hcGklMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYmlrcmFtc3V0YXIlMkZEZXNrdG9wJTJGd29ya3NwYWNlJTJGaGFja2F0aG9uJTJGYmFja2VuZCUyRnNlcnZlcnMlMkZzdW5vLWFpLWFwaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrRDtBQUM1STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3N1bm8tYXBpLz9iMDgyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9iaWtyYW1zdXRhci9EZXNrdG9wL3dvcmtzcGFjZS9oYWNrYXRob24vYmFja2VuZC9zZXJ2ZXJzL3N1bm8tYWktYXBpL3NyYy9hcHAvYXBpL2N1c3RvbV9nZW5lcmF0ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY3VzdG9tX2dlbmVyYXRlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY3VzdG9tX2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jdXN0b21fZ2VuZXJhdGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYmlrcmFtc3V0YXIvRGVza3RvcC93b3Jrc3BhY2UvaGFja2F0aG9uL2JhY2tlbmQvc2VydmVycy9zdW5vLWFpLWFwaS9zcmMvYXBwL2FwaS9jdXN0b21fZ2VuZXJhdGUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY3VzdG9tX2dlbmVyYXRlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustom_generate%2Froute&page=%2Fapi%2Fcustom_generate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustom_generate%2Froute.ts&appDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/custom_generate/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/custom_generate/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_SunoApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/SunoApi */ \"(rsc)/./src/lib/SunoApi.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n\n\n\nconst maxDuration = 60; // allow longer timeout for wait_audio == true\nconst dynamic = \"force-dynamic\";\nasync function POST(req) {\n    if (req.method === \"POST\") {\n        try {\n            const body = await req.json();\n            const { prompt, tags, title, make_instrumental, wait_audio } = body;\n            if (!prompt || !tags || !title) {\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                    error: \"Prompt, tags, and title are required\"\n                }), {\n                    status: 400,\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        ..._lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n                    }\n                });\n            }\n            const audioInfo = await (await _lib_SunoApi__WEBPACK_IMPORTED_MODULE_1__.sunoApi).custom_generate(prompt, tags, title, make_instrumental == true, wait_audio == true);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify(audioInfo), {\n                status: 200,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ..._lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n                }\n            });\n        } catch (error) {\n            console.error(\"Error generating custom audio:\", error.response.data);\n            if (error.response.status === 402) {\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                    error: error.response.data.detail\n                }), {\n                    status: 402,\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        ..._lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n                    }\n                });\n            }\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: \"Internal server error\"\n            }), {\n                status: 500,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ..._lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n                }\n            });\n        }\n    } else {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Method Not Allowed\", {\n            headers: {\n                Allow: \"POST\",\n                ..._lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n            },\n            status: 405\n        });\n    }\n}\nasync function OPTIONS(request) {\n    return new Response(null, {\n        status: 200,\n        headers: _lib_utils__WEBPACK_IMPORTED_MODULE_2__.corsHeaders\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jdXN0b21fZ2VuZXJhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUNoQjtBQUNFO0FBRW5DLE1BQU1HLGNBQWMsR0FBRyxDQUFDLDhDQUE4QztBQUN0RSxNQUFNQyxVQUFVLGdCQUFnQjtBQUVoQyxlQUFlQyxLQUFLQyxHQUFnQjtJQUN6QyxJQUFJQSxJQUFJQyxNQUFNLEtBQUssUUFBUTtRQUN6QixJQUFJO1lBQ0YsTUFBTUMsT0FBTyxNQUFNRixJQUFJRyxJQUFJO1lBQzNCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsaUJBQWlCLEVBQUVDLFVBQVUsRUFBRSxHQUFHTjtZQUMvRCxJQUFJLENBQUNFLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDQyxPQUFPO2dCQUM5QixPQUFPLElBQUlaLHFEQUFZQSxDQUFDZSxLQUFLQyxTQUFTLENBQUM7b0JBQUVDLE9BQU87Z0JBQXVDLElBQUk7b0JBQ3pGQyxRQUFRO29CQUNSQyxTQUFTO3dCQUNQLGdCQUFnQjt3QkFDaEIsR0FBR2pCLG1EQUFXO29CQUNoQjtnQkFDRjtZQUNGO1lBQ0EsTUFBTWtCLFlBQVksTUFBTSxDQUFDLE1BQU1uQixpREFBTSxFQUFHb0IsZUFBZSxDQUNyRFgsUUFBUUMsTUFBTUMsT0FDZEMscUJBQXFCLE1BQ3JCQyxjQUFjO1lBRWhCLE9BQU8sSUFBSWQscURBQVlBLENBQUNlLEtBQUtDLFNBQVMsQ0FBQ0ksWUFBWTtnQkFDakRGLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO29CQUNoQixHQUFHakIsbURBQVc7Z0JBQ2hCO1lBQ0Y7UUFDRixFQUFFLE9BQU9lLE9BQVk7WUFDbkJLLFFBQVFMLEtBQUssQ0FBQyxrQ0FBa0NBLE1BQU1NLFFBQVEsQ0FBQ0MsSUFBSTtZQUNuRSxJQUFJUCxNQUFNTSxRQUFRLENBQUNMLE1BQU0sS0FBSyxLQUFLO2dCQUNqQyxPQUFPLElBQUlsQixxREFBWUEsQ0FBQ2UsS0FBS0MsU0FBUyxDQUFDO29CQUFFQyxPQUFPQSxNQUFNTSxRQUFRLENBQUNDLElBQUksQ0FBQ0MsTUFBTTtnQkFBQyxJQUFJO29CQUM3RVAsUUFBUTtvQkFDUkMsU0FBUzt3QkFDUCxnQkFBZ0I7d0JBQ2hCLEdBQUdqQixtREFBVztvQkFDaEI7Z0JBQ0Y7WUFDRjtZQUNBLE9BQU8sSUFBSUYscURBQVlBLENBQUNlLEtBQUtDLFNBQVMsQ0FBQztnQkFBRUMsT0FBTztZQUF3QixJQUFJO2dCQUMxRUMsUUFBUTtnQkFDUkMsU0FBUztvQkFDUCxnQkFBZ0I7b0JBQ2hCLEdBQUdqQixtREFBVztnQkFDaEI7WUFDRjtRQUNGO0lBQ0YsT0FBTztRQUNMLE9BQU8sSUFBSUYscURBQVlBLENBQUMsc0JBQXNCO1lBQzVDbUIsU0FBUztnQkFDUE8sT0FBTztnQkFDUCxHQUFHeEIsbURBQVc7WUFDaEI7WUFDQWdCLFFBQVE7UUFDVjtJQUNGO0FBQ0Y7QUFFTyxlQUFlUyxRQUFRQyxPQUFnQjtJQUM1QyxPQUFPLElBQUlDLFNBQVMsTUFBTTtRQUN4QlgsUUFBUTtRQUNSQyxTQUFTakIsbURBQVdBO0lBQ3RCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdW5vLWFwaS8uL3NyYy9hcHAvYXBpL2N1c3RvbV9nZW5lcmF0ZS9yb3V0ZS50cz80NmVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSwgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IHN1bm9BcGkgfSBmcm9tIFwiQC9saWIvU3Vub0FwaVwiO1xuaW1wb3J0IHsgY29yc0hlYWRlcnMgfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcblxuZXhwb3J0IGNvbnN0IG1heER1cmF0aW9uID0gNjA7IC8vIGFsbG93IGxvbmdlciB0aW1lb3V0IGZvciB3YWl0X2F1ZGlvID09IHRydWVcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICAgIGNvbnN0IHsgcHJvbXB0LCB0YWdzLCB0aXRsZSwgbWFrZV9pbnN0cnVtZW50YWwsIHdhaXRfYXVkaW8gfSA9IGJvZHk7XG4gICAgICBpZiAoIXByb21wdCB8fCAhdGFncyB8fCAhdGl0bGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ1Byb21wdCwgdGFncywgYW5kIHRpdGxlIGFyZSByZXF1aXJlZCcgfSksIHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgLi4uY29yc0hlYWRlcnNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYXVkaW9JbmZvID0gYXdhaXQgKGF3YWl0IHN1bm9BcGkpLmN1c3RvbV9nZW5lcmF0ZShcbiAgICAgICAgcHJvbXB0LCB0YWdzLCB0aXRsZSxcbiAgICAgICAgbWFrZV9pbnN0cnVtZW50YWwgPT0gdHJ1ZSxcbiAgICAgICAgd2FpdF9hdWRpbyA9PSB0cnVlXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoYXVkaW9JbmZvKSwge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgLi4uY29yc0hlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBjdXN0b20gYXVkaW86JywgZXJyb3IucmVzcG9uc2UuZGF0YSk7XG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IucmVzcG9uc2UuZGF0YS5kZXRhaWwgfSksIHtcbiAgICAgICAgICBzdGF0dXM6IDQwMixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgLi4uY29yc0hlYWRlcnNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSksIHtcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIC4uLmNvcnNIZWFkZXJzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZSgnTWV0aG9kIE5vdCBBbGxvd2VkJywge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBbGxvdzogJ1BPU1QnLFxuICAgICAgICAuLi5jb3JzSGVhZGVyc1xuICAgICAgfSxcbiAgICAgIHN0YXR1czogNDA1XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMocmVxdWVzdDogUmVxdWVzdCkge1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBoZWFkZXJzOiBjb3JzSGVhZGVyc1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdW5vQXBpIiwiY29yc0hlYWRlcnMiLCJtYXhEdXJhdGlvbiIsImR5bmFtaWMiLCJQT1NUIiwicmVxIiwibWV0aG9kIiwiYm9keSIsImpzb24iLCJwcm9tcHQiLCJ0YWdzIiwidGl0bGUiLCJtYWtlX2luc3RydW1lbnRhbCIsIndhaXRfYXVkaW8iLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJzdGF0dXMiLCJoZWFkZXJzIiwiYXVkaW9JbmZvIiwiY3VzdG9tX2dlbmVyYXRlIiwiY29uc29sZSIsInJlc3BvbnNlIiwiZGF0YSIsImRldGFpbCIsIkFsbG93IiwiT1BUSU9OUyIsInJlcXVlc3QiLCJSZXNwb25zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/custom_generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/SunoApi.ts":
/*!****************************!*\
  !*** ./src/lib/SunoApi.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sunoApi: () => (/* binding */ sunoApi)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var user_agents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! user-agents */ \"(rsc)/./node_modules/user-agents/dist/index.js\");\n/* harmony import */ var user_agents__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(user_agents__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pino */ \"(rsc)/./node_modules/pino/pino.js\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios_cookiejar_support__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios-cookiejar-support */ \"(rsc)/./node_modules/axios-cookiejar-support/dist/index.js\");\n/* harmony import */ var tough_cookie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tough-cookie */ \"(rsc)/./node_modules/tough-cookie/lib/cookie.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n\n\n\n\n\n\nconst logger = pino__WEBPACK_IMPORTED_MODULE_1___default()();\nclass SunoApi {\n    static{\n        this.BASE_URL = \"https://studio-api.suno.ai\";\n    }\n    static{\n        this.CLERK_BASE_URL = \"https://clerk.suno.com\";\n    }\n    constructor(cookie){\n        const cookieJar = new tough_cookie__WEBPACK_IMPORTED_MODULE_3__.CookieJar();\n        const randomUserAgent = new (user_agents__WEBPACK_IMPORTED_MODULE_0___default())(/Chrome/).random().toString();\n        this.client = (0,axios_cookiejar_support__WEBPACK_IMPORTED_MODULE_2__.wrapper)(axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].create({\n            jar: cookieJar,\n            withCredentials: true,\n            headers: {\n                \"User-Agent\": randomUserAgent,\n                \"Cookie\": cookie\n            }\n        }));\n        this.client.interceptors.request.use((config)=>{\n            if (this.currentToken) {\n                config.headers[\"Authorization\"] = `Bearer ${this.currentToken}`;\n            }\n            return config;\n        });\n    }\n    async init() {\n        await this.getAuthToken();\n        await this.keepAlive();\n        return this;\n    }\n    /**\n   * Get the session ID and save it for later use.\n   */ async getAuthToken() {\n        // URL to get session ID\n        const getSessionUrl = `${SunoApi.CLERK_BASE_URL}/v1/client?_clerk_js_version=4.73.2`;\n        // Get session ID\n        const sessionResponse = await this.client.get(getSessionUrl);\n        if (!sessionResponse?.data?.response?.[\"last_active_session_id\"]) {\n            throw new Error(\"Failed to get session id, you may need to update the SUNO_COOKIE\");\n        }\n        // Save session ID for later use\n        this.sid = sessionResponse.data.response[\"last_active_session_id\"];\n    }\n    /**\n   * Keep the session alive.\n   * @param isWait Indicates if the method should wait for the session to be fully renewed before returning.\n   */ async keepAlive(isWait) {\n        if (!this.sid) {\n            throw new Error(\"Session ID is not set. Cannot renew token.\");\n        }\n        // URL to renew session token\n        const renewUrl = `${SunoApi.CLERK_BASE_URL}/v1/client/sessions/${this.sid}/tokens?_clerk_js_version==4.73.2`;\n        // Renew session token\n        const renewResponse = await this.client.post(renewUrl);\n        logger.info(\"KeepAlive...\\n\");\n        if (isWait) {\n            await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.sleep)(1, 2);\n        }\n        const newToken = renewResponse.data[\"jwt\"];\n        console.log(\"newToken:===\\n\\n\", newToken);\n        // Update Authorization field in request header with the new JWT token\n        this.currentToken = newToken;\n    }\n    /**\n   * Generate a song based on the prompt.\n   * @param prompt The text prompt to generate audio from.\n   * @param make_instrumental Indicates if the generated audio should be instrumental.\n   * @param wait_audio Indicates if the method should wait for the audio file to be fully generated before returning.\n   * @returns \n   */ async generate(prompt, make_instrumental = false, wait_audio = false) {\n        await this.keepAlive(false);\n        const startTime = Date.now();\n        const audios = this.generateSongs(prompt, false, undefined, undefined, make_instrumental, wait_audio);\n        const costTime = Date.now() - startTime;\n        logger.info(\"Generate Response:\\n\" + JSON.stringify(audios, null, 2));\n        logger.info(\"Cost time: \" + costTime);\n        return audios;\n    }\n    /**\n   * Calls the concatenate endpoint for a clip to generate the whole song.\n   * @param clip_id The ID of the audio clip to concatenate.\n   * @returns A promise that resolves to an AudioInfo object representing the concatenated audio.\n   * @throws Error if the response status is not 200.\n   */ async concatenate(clip_id) {\n        await this.keepAlive(false);\n        const payload = {\n            clip_id: clip_id\n        };\n        const response = await this.client.post(`${SunoApi.BASE_URL}/api/generate/concat/v2/`, payload, {\n            timeout: 10000\n        });\n        if (response.status !== 200) {\n            throw new Error(\"Error response:\" + response.statusText);\n        }\n        return response.data;\n    }\n    /**\n   * Generates custom audio based on provided parameters.\n   *\n   * @param prompt The text prompt to generate audio from.\n   * @param tags Tags to categorize the generated audio.\n   * @param title The title for the generated audio.\n   * @param make_instrumental Indicates if the generated audio should be instrumental.\n   * @param wait_audio Indicates if the method should wait for the audio file to be fully generated before returning.\n   * @returns A promise that resolves to an array of AudioInfo objects representing the generated audios.\n   */ async custom_generate(prompt, tags, title, make_instrumental = false, wait_audio = false) {\n        const startTime = Date.now();\n        const audios = await this.generateSongs(prompt, true, tags, title, make_instrumental, wait_audio);\n        const costTime = Date.now() - startTime;\n        logger.info(\"Custom Generate Response:\\n\" + JSON.stringify(audios, null, 2));\n        logger.info(\"Cost time: \" + costTime);\n        return audios;\n    }\n    /**\n   * Generates songs based on the provided parameters.\n   *\n   * @param prompt The text prompt to generate songs from.\n   * @param isCustom Indicates if the generation should consider custom parameters like tags and title.\n   * @param tags Optional tags to categorize the song, used only if isCustom is true.\n   * @param title Optional title for the song, used only if isCustom is true.\n   * @param make_instrumental Indicates if the generated song should be instrumental.\n   * @param wait_audio Indicates if the method should wait for the audio file to be fully generated before returning.\n   * @returns A promise that resolves to an array of AudioInfo objects representing the generated songs.\n   */ async generateSongs(prompt, isCustom, tags, title, make_instrumental, wait_audio = false) {\n        await this.keepAlive(false);\n        const payload = {\n            make_instrumental: make_instrumental == true,\n            mv: \"chirp-v3-5\",\n            prompt: \"\"\n        };\n        if (isCustom) {\n            payload.tags = tags;\n            payload.title = title;\n            payload.prompt = prompt;\n        } else {\n            payload.gpt_description_prompt = prompt;\n        }\n        logger.info(\"generateSongs payload:\\n\" + JSON.stringify({\n            prompt: prompt,\n            isCustom: isCustom,\n            tags: tags,\n            title: title,\n            make_instrumental: make_instrumental,\n            wait_audio: wait_audio,\n            payload: payload\n        }, null, 2));\n        const response = await this.client.post(`${SunoApi.BASE_URL}/api/generate/v2/`, payload, {\n            timeout: 10000\n        });\n        logger.info(\"generateSongs Response:\\n\" + JSON.stringify(response.data, null, 2));\n        if (response.status !== 200) {\n            throw new Error(\"Error response:\" + response.statusText);\n        }\n        const songIds = response.data[\"clips\"].map((audio)=>audio.id);\n        //Want to wait for music file generation\n        if (wait_audio) {\n            const startTime = Date.now();\n            let lastResponse = [];\n            await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.sleep)(5, 5);\n            while(Date.now() - startTime < 100000){\n                const response = await this.get(songIds);\n                const allCompleted = response.every((audio)=>audio.status === \"streaming\" || audio.status === \"complete\");\n                if (allCompleted) {\n                    return response;\n                }\n                lastResponse = response;\n                await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.sleep)(3, 6);\n                await this.keepAlive(true);\n            }\n            return lastResponse;\n        } else {\n            await this.keepAlive(true);\n            return response.data[\"clips\"].map((audio)=>({\n                    id: audio.id,\n                    title: audio.title,\n                    image_url: audio.image_url,\n                    lyric: audio.metadata.prompt,\n                    audio_url: audio.audio_url,\n                    video_url: audio.video_url,\n                    created_at: audio.created_at,\n                    model_name: audio.model_name,\n                    status: audio.status,\n                    gpt_description_prompt: audio.metadata.gpt_description_prompt,\n                    prompt: audio.metadata.prompt,\n                    type: audio.metadata.type,\n                    tags: audio.metadata.tags,\n                    duration: audio.metadata.duration_formatted\n                }));\n        }\n    }\n    /**\n   * Generates lyrics based on a given prompt.\n   * @param prompt The prompt for generating lyrics.\n   * @returns The generated lyrics text.\n   */ async generateLyrics(prompt) {\n        await this.keepAlive(false);\n        // Initiate lyrics generation\n        const generateResponse = await this.client.post(`${SunoApi.BASE_URL}/api/generate/lyrics/`, {\n            prompt\n        });\n        const generateId = generateResponse.data.id;\n        // Poll for lyrics completion\n        let lyricsResponse = await this.client.get(`${SunoApi.BASE_URL}/api/generate/lyrics/${generateId}`);\n        while(lyricsResponse?.data?.status !== \"complete\"){\n            await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.sleep)(2); // Wait for 2 seconds before polling again\n            lyricsResponse = await this.client.get(`${SunoApi.BASE_URL}/api/generate/lyrics/${generateId}`);\n        }\n        // Return the generated lyrics text\n        return lyricsResponse.data;\n    }\n    /**\n   * Extends an existing audio clip by generating additional content based on the provided prompt.\n   * \n   * @param audioId The ID of the audio clip to extend.\n   * @param prompt The prompt for generating additional content.\n   * @param continueAt Extend a new clip from a song at mm:ss(e.g. 00:30). Default extends from the end of the song.\n   * @param tags Style of Music.\n   * @param title Title of the song.\n   * @returns A promise that resolves to an AudioInfo object representing the extended audio clip.\n   */ async extendAudio(audioId, prompt = \"\", continueAt = \"0\", tags = \"\", title = \"\") {\n        const response = await this.client.post(`${SunoApi.BASE_URL}/api/generate/v2/`, {\n            continue_clip_id: audioId,\n            continue_at: continueAt,\n            mv: \"chirp-v3-0\",\n            prompt: prompt,\n            tags: tags,\n            title: \"\"\n        });\n        return response.data;\n    }\n    /**\n   * Processes the lyrics (prompt) from the audio metadata into a more readable format.\n   * @param prompt The original lyrics text.\n   * @returns The processed lyrics text.\n   */ parseLyrics(prompt) {\n        // Assuming the original lyrics are separated by a specific delimiter (e.g., newline), we can convert it into a more readable format.\n        // The implementation here can be adjusted according to the actual lyrics format.\n        // For example, if the lyrics exist as continuous text, it might be necessary to split them based on specific markers (such as periods, commas, etc.).\n        // The following implementation assumes that the lyrics are already separated by newlines.\n        // Split the lyrics using newline and ensure to remove empty lines.\n        const lines = prompt.split(\"\\n\").filter((line)=>line.trim() !== \"\");\n        // Reassemble the processed lyrics lines into a single string, separated by newlines between each line.\n        // Additional formatting logic can be added here, such as adding specific markers or handling special lines.\n        return lines.join(\"\\n\");\n    }\n    /**\n   * Retrieves audio information for the given song IDs.\n   * @param songIds An optional array of song IDs to retrieve information for.\n   * @returns A promise that resolves to an array of AudioInfo objects.\n   */ async get(songIds) {\n        await this.keepAlive(false);\n        let url = `${SunoApi.BASE_URL}/api/feed/`;\n        if (songIds) {\n            url = `${url}?ids=${songIds.join(\",\")}`;\n        }\n        logger.info(\"Get audio status: \" + url);\n        const response = await this.client.get(url, {\n            // 3 seconds timeout\n            timeout: 3000\n        });\n        const audios = response.data;\n        return audios.map((audio)=>({\n                id: audio.id,\n                title: audio.title,\n                image_url: audio.image_url,\n                lyric: audio.metadata.prompt ? this.parseLyrics(audio.metadata.prompt) : \"\",\n                audio_url: audio.audio_url,\n                video_url: audio.video_url,\n                created_at: audio.created_at,\n                model_name: audio.model_name,\n                status: audio.status,\n                gpt_description_prompt: audio.metadata.gpt_description_prompt,\n                prompt: audio.metadata.prompt,\n                type: audio.metadata.type,\n                tags: audio.metadata.tags,\n                duration: audio.metadata.duration_formatted\n            }));\n    }\n    /**\n   * Retrieves information for a specific audio clip.\n   * @param clipId The ID of the audio clip to retrieve information for.\n   * @returns A promise that resolves to an object containing the audio clip information.\n   */ async getClip(clipId) {\n        await this.keepAlive(false);\n        const response = await this.client.get(`${SunoApi.BASE_URL}/api/clip/${clipId}`);\n        return response.data;\n    }\n    async get_credits() {\n        await this.keepAlive(false);\n        const response = await this.client.get(`${SunoApi.BASE_URL}/api/billing/info/`);\n        return {\n            credits_left: response.data.total_credits_left,\n            period: response.data.period,\n            monthly_limit: response.data.monthly_limit,\n            monthly_usage: response.data.monthly_usage\n        };\n    }\n}\nconst newSunoApi = async (cookie)=>{\n    const sunoApi = new SunoApi(cookie);\n    return await sunoApi.init();\n};\nif (!process.env.SUNO_COOKIE) {\n    console.log(\"Environment does not contain SUNO_COOKIE.\", process.env);\n}\nconst sunoApi = newSunoApi(process.env.SUNO_COOKIE || \"\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLDZDQUE2Q3NFLFFBQVFDLEdBQUc7QUFDdEU7QUFFTyxNQUFNRixVQUFVRCxXQUFXRSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSSxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3Vuby1hcGkvLi9zcmMvbGliL1N1bm9BcGkudHM/ZTc2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MsIHsgQXhpb3NJbnN0YW5jZSB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCBVc2VyQWdlbnQgZnJvbSAndXNlci1hZ2VudHMnO1xuaW1wb3J0IHBpbm8gZnJvbSAncGlubyc7XG5pbXBvcnQgeyB3cmFwcGVyIH0gZnJvbSBcImF4aW9zLWNvb2tpZWphci1zdXBwb3J0XCI7XG5pbXBvcnQgeyBDb29raWVKYXIgfSBmcm9tIFwidG91Z2gtY29va2llXCI7XG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gXCJAL2xpYi91dGlsc1wiO1xuXG5jb25zdCBsb2dnZXIgPSBwaW5vKCk7XG5cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb0luZm8ge1xuICBpZDogc3RyaW5nOyAvLyBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGF1ZGlvXG4gIHRpdGxlPzogc3RyaW5nOyAvLyBUaXRsZSBvZiB0aGUgYXVkaW9cbiAgaW1hZ2VfdXJsPzogc3RyaW5nOyAvLyBVUkwgb2YgdGhlIGltYWdlIGFzc29jaWF0ZWQgd2l0aCB0aGUgYXVkaW9cbiAgbHlyaWM/OiBzdHJpbmc7IC8vIEx5cmljcyBvZiB0aGUgYXVkaW9cbiAgYXVkaW9fdXJsPzogc3RyaW5nOyAvLyBVUkwgb2YgdGhlIGF1ZGlvIGZpbGVcbiAgdmlkZW9fdXJsPzogc3RyaW5nOyAvLyBVUkwgb2YgdGhlIHZpZGVvIGFzc29jaWF0ZWQgd2l0aCB0aGUgYXVkaW9cbiAgY3JlYXRlZF9hdDogc3RyaW5nOyAvLyBEYXRlIGFuZCB0aW1lIHdoZW4gdGhlIGF1ZGlvIHdhcyBjcmVhdGVkXG4gIG1vZGVsX25hbWU6IHN0cmluZzsgLy8gTmFtZSBvZiB0aGUgbW9kZWwgdXNlZCBmb3IgYXVkaW8gZ2VuZXJhdGlvblxuICBncHRfZGVzY3JpcHRpb25fcHJvbXB0Pzogc3RyaW5nOyAvLyBQcm9tcHQgZm9yIEdQVCBkZXNjcmlwdGlvblxuICBwcm9tcHQ/OiBzdHJpbmc7IC8vIFByb21wdCBmb3IgYXVkaW8gZ2VuZXJhdGlvblxuICBzdGF0dXM6IHN0cmluZzsgLy8gU3RhdHVzXG4gIHR5cGU/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmc7IC8vIEdlbnJlIG9mIG11c2ljLlxuICBkdXJhdGlvbj86IHN0cmluZzsgLy8gRHVyYXRpb24gb2YgdGhlIGF1ZGlvXG59XG5cbmNsYXNzIFN1bm9BcGkge1xuICBwcml2YXRlIHN0YXRpYyBCQVNFX1VSTDogc3RyaW5nID0gJ2h0dHBzOi8vc3R1ZGlvLWFwaS5zdW5vLmFpJztcbiAgcHJpdmF0ZSBzdGF0aWMgQ0xFUktfQkFTRV9VUkw6IHN0cmluZyA9ICdodHRwczovL2NsZXJrLnN1bm8uY29tJztcblxuICBwcml2YXRlIHJlYWRvbmx5IGNsaWVudDogQXhpb3NJbnN0YW5jZTtcbiAgcHJpdmF0ZSBzaWQ/OiBzdHJpbmc7XG4gIHByaXZhdGUgY3VycmVudFRva2VuPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNvb2tpZTogc3RyaW5nKSB7XG4gICAgY29uc3QgY29va2llSmFyID0gbmV3IENvb2tpZUphcigpO1xuICAgIGNvbnN0IHJhbmRvbVVzZXJBZ2VudCA9IG5ldyBVc2VyQWdlbnQoL0Nocm9tZS8pLnJhbmRvbSgpLnRvU3RyaW5nKCk7XG4gICAgdGhpcy5jbGllbnQgPSB3cmFwcGVyKGF4aW9zLmNyZWF0ZSh7XG4gICAgICBqYXI6IGNvb2tpZUphcixcbiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb21Vc2VyQWdlbnQsXG4gICAgICAgICdDb29raWUnOiBjb29raWVcbiAgICAgIH1cbiAgICB9KSlcbiAgICB0aGlzLmNsaWVudC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoKGNvbmZpZykgPT4ge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFRva2VuKSB7IC8vIFVzZSB0aGUgY3VycmVudCB0b2tlbiBzdGF0dXNcbiAgICAgICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmN1cnJlbnRUb2tlbn1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBpbml0KCk6IFByb21pc2U8U3Vub0FwaT4ge1xuICAgIGF3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCk7XG4gICAgYXdhaXQgdGhpcy5rZWVwQWxpdmUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNlc3Npb24gSUQgYW5kIHNhdmUgaXQgZm9yIGxhdGVyIHVzZS5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0QXV0aFRva2VuKCkge1xuICAgIC8vIFVSTCB0byBnZXQgc2Vzc2lvbiBJRFxuICAgIGNvbnN0IGdldFNlc3Npb25VcmwgPSBgJHtTdW5vQXBpLkNMRVJLX0JBU0VfVVJMfS92MS9jbGllbnQ/X2NsZXJrX2pzX3ZlcnNpb249NC43My4yYDvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgXG4gICAgLy8gR2V0IHNlc3Npb24gSURcbiAgICBjb25zdCBzZXNzaW9uUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXQoZ2V0U2Vzc2lvblVybCk7XG4gICAgaWYgKCFzZXNzaW9uUmVzcG9uc2U/LmRhdGE/LnJlc3BvbnNlPy5bJ2xhc3RfYWN0aXZlX3Nlc3Npb25faWQnXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBzZXNzaW9uIGlkLCB5b3UgbWF5IG5lZWQgdG8gdXBkYXRlIHRoZSBTVU5PX0NPT0tJRVwiKTtcbiAgICB9XG4gICAgLy8gU2F2ZSBzZXNzaW9uIElEIGZvciBsYXRlciB1c2VcbiAgICB0aGlzLnNpZCA9IHNlc3Npb25SZXNwb25zZS5kYXRhLnJlc3BvbnNlWydsYXN0X2FjdGl2ZV9zZXNzaW9uX2lkJ107XG4gIH1cblxuICAvKipcbiAgICogS2VlcCB0aGUgc2Vzc2lvbiBhbGl2ZS5cbiAgICogQHBhcmFtIGlzV2FpdCBJbmRpY2F0ZXMgaWYgdGhlIG1ldGhvZCBzaG91bGQgd2FpdCBmb3IgdGhlIHNlc3Npb24gdG8gYmUgZnVsbHkgcmVuZXdlZCBiZWZvcmUgcmV0dXJuaW5nLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGtlZXBBbGl2ZShpc1dhaXQ/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBJRCBpcyBub3Qgc2V0LiBDYW5ub3QgcmVuZXcgdG9rZW4uXCIpO1xuICAgIH1cbiAgICAvLyBVUkwgdG8gcmVuZXcgc2Vzc2lvbiB0b2tlblxuICAgIGNvbnN0IHJlbmV3VXJsID0gYCR7U3Vub0FwaS5DTEVSS19CQVNFX1VSTH0vdjEvY2xpZW50L3Nlc3Npb25zLyR7dGhpcy5zaWR9L3Rva2Vucz9fY2xlcmtfanNfdmVyc2lvbj09NC43My4yYDvCoMKgXG4gICAgLy8gUmVuZXcgc2Vzc2lvbiB0b2tlblxuICAgIGNvbnN0IHJlbmV3UmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5wb3N0KHJlbmV3VXJsKTtcbiAgICBsb2dnZXIuaW5mbyhcIktlZXBBbGl2ZS4uLlxcblwiKTtcbiAgICBpZiAoaXNXYWl0KSB7XG4gICAgICBhd2FpdCBzbGVlcCgxLCAyKTtcbiAgICB9XG4gICAgY29uc3QgbmV3VG9rZW4gPSByZW5ld1Jlc3BvbnNlLmRhdGFbJ2p3dCddO1xuICAgIGNvbnNvbGUubG9nKFwibmV3VG9rZW46PT09XFxuXFxuXCIsIG5ld1Rva2VuKTtcbiAgICAvLyBVcGRhdGUgQXV0aG9yaXphdGlvbiBmaWVsZCBpbiByZXF1ZXN0IGhlYWRlciB3aXRoIHRoZSBuZXcgSldUIHRva2VuXG4gICAgdGhpcy5jdXJyZW50VG9rZW4gPSBuZXdUb2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHNvbmcgYmFzZWQgb24gdGhlIHByb21wdC5cbiAgICogQHBhcmFtIHByb21wdCBUaGUgdGV4dCBwcm9tcHQgdG8gZ2VuZXJhdGUgYXVkaW8gZnJvbS5cbiAgICogQHBhcmFtIG1ha2VfaW5zdHJ1bWVudGFsIEluZGljYXRlcyBpZiB0aGUgZ2VuZXJhdGVkIGF1ZGlvIHNob3VsZCBiZSBpbnN0cnVtZW50YWwuXG4gICAqIEBwYXJhbSB3YWl0X2F1ZGlvIEluZGljYXRlcyBpZiB0aGUgbWV0aG9kIHNob3VsZCB3YWl0IGZvciB0aGUgYXVkaW8gZmlsZSB0byBiZSBmdWxseSBnZW5lcmF0ZWQgYmVmb3JlIHJldHVybmluZy5cbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGUoXG4gICAgcHJvbXB0OiBzdHJpbmcsXG4gICAgbWFrZV9pbnN0cnVtZW50YWw6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICB3YWl0X2F1ZGlvOiBib29sZWFuID0gZmFsc2UsXG4gICk6IFByb21pc2U8QXVkaW9JbmZvW10+IHtcbiAgICBhd2FpdCB0aGlzLmtlZXBBbGl2ZShmYWxzZSk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBhdWRpb3MgPSB0aGlzLmdlbmVyYXRlU29uZ3MocHJvbXB0LCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG1ha2VfaW5zdHJ1bWVudGFsLCB3YWl0X2F1ZGlvKTtcbiAgICBjb25zdCBjb3N0VGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgbG9nZ2VyLmluZm8oXCJHZW5lcmF0ZSBSZXNwb25zZTpcXG5cIiArIEpTT04uc3RyaW5naWZ5KGF1ZGlvcywgbnVsbCwgMikpO1xuICAgIGxvZ2dlci5pbmZvKFwiQ29zdCB0aW1lOiBcIiArIGNvc3RUaW1lKTtcbiAgICByZXR1cm4gYXVkaW9zO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIHRoZSBjb25jYXRlbmF0ZSBlbmRwb2ludCBmb3IgYSBjbGlwIHRvIGdlbmVyYXRlIHRoZSB3aG9sZSBzb25nLlxuICAgKiBAcGFyYW0gY2xpcF9pZCBUaGUgSUQgb2YgdGhlIGF1ZGlvIGNsaXAgdG8gY29uY2F0ZW5hdGUuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIEF1ZGlvSW5mbyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjb25jYXRlbmF0ZWQgYXVkaW8uXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIHJlc3BvbnNlIHN0YXR1cyBpcyBub3QgMjAwLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGNvbmNhdGVuYXRlKGNsaXBfaWQ6IHN0cmluZyk6IFByb21pc2U8QXVkaW9JbmZvPiB7XG4gICAgYXdhaXQgdGhpcy5rZWVwQWxpdmUoZmFsc2UpO1xuICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHsgY2xpcF9pZDogY2xpcF9pZCB9O1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5wb3N0KFxuICAgICAgYCR7U3Vub0FwaS5CQVNFX1VSTH0vYXBpL2dlbmVyYXRlL2NvbmNhdC92Mi9gLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIHtcbiAgICAgICAgdGltZW91dDogMTAwMDAsIC8vIDEwIHNlY29uZHMgdGltZW91dFxuICAgICAgfSxcbiAgICApO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgcmVzcG9uc2U6XCIgKyByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGN1c3RvbSBhdWRpbyBiYXNlZCBvbiBwcm92aWRlZCBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvbXB0IFRoZSB0ZXh0IHByb21wdCB0byBnZW5lcmF0ZSBhdWRpbyBmcm9tLlxuICAgKiBAcGFyYW0gdGFncyBUYWdzIHRvIGNhdGVnb3JpemUgdGhlIGdlbmVyYXRlZCBhdWRpby5cbiAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSBmb3IgdGhlIGdlbmVyYXRlZCBhdWRpby5cbiAgICogQHBhcmFtIG1ha2VfaW5zdHJ1bWVudGFsIEluZGljYXRlcyBpZiB0aGUgZ2VuZXJhdGVkIGF1ZGlvIHNob3VsZCBiZSBpbnN0cnVtZW50YWwuXG4gICAqIEBwYXJhbSB3YWl0X2F1ZGlvIEluZGljYXRlcyBpZiB0aGUgbWV0aG9kIHNob3VsZCB3YWl0IGZvciB0aGUgYXVkaW8gZmlsZSB0byBiZSBmdWxseSBnZW5lcmF0ZWQgYmVmb3JlIHJldHVybmluZy5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgQXVkaW9JbmZvIG9iamVjdHMgcmVwcmVzZW50aW5nIHRoZSBnZW5lcmF0ZWQgYXVkaW9zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGN1c3RvbV9nZW5lcmF0ZShcbiAgICBwcm9tcHQ6IHN0cmluZyxcbiAgICB0YWdzOiBzdHJpbmcsXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBtYWtlX2luc3RydW1lbnRhbDogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHdhaXRfYXVkaW86IGJvb2xlYW4gPSBmYWxzZSxcbiAgKTogUHJvbWlzZTxBdWRpb0luZm9bXT4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgYXVkaW9zID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVNvbmdzKHByb21wdCwgdHJ1ZSwgdGFncywgdGl0bGUsIG1ha2VfaW5zdHJ1bWVudGFsLCB3YWl0X2F1ZGlvKTtcbiAgICBjb25zdCBjb3N0VGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgbG9nZ2VyLmluZm8oXCJDdXN0b20gR2VuZXJhdGUgUmVzcG9uc2U6XFxuXCIgKyBKU09OLnN0cmluZ2lmeShhdWRpb3MsIG51bGwsIDIpKTtcbiAgICBsb2dnZXIuaW5mbyhcIkNvc3QgdGltZTogXCIgKyBjb3N0VGltZSk7XG4gICAgcmV0dXJuIGF1ZGlvcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgc29uZ3MgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9tcHQgVGhlIHRleHQgcHJvbXB0IHRvIGdlbmVyYXRlIHNvbmdzIGZyb20uXG4gICAqIEBwYXJhbSBpc0N1c3RvbSBJbmRpY2F0ZXMgaWYgdGhlIGdlbmVyYXRpb24gc2hvdWxkIGNvbnNpZGVyIGN1c3RvbSBwYXJhbWV0ZXJzIGxpa2UgdGFncyBhbmQgdGl0bGUuXG4gICAqIEBwYXJhbSB0YWdzIE9wdGlvbmFsIHRhZ3MgdG8gY2F0ZWdvcml6ZSB0aGUgc29uZywgdXNlZCBvbmx5IGlmIGlzQ3VzdG9tIGlzIHRydWUuXG4gICAqIEBwYXJhbSB0aXRsZSBPcHRpb25hbCB0aXRsZSBmb3IgdGhlIHNvbmcsIHVzZWQgb25seSBpZiBpc0N1c3RvbSBpcyB0cnVlLlxuICAgKiBAcGFyYW0gbWFrZV9pbnN0cnVtZW50YWwgSW5kaWNhdGVzIGlmIHRoZSBnZW5lcmF0ZWQgc29uZyBzaG91bGQgYmUgaW5zdHJ1bWVudGFsLlxuICAgKiBAcGFyYW0gd2FpdF9hdWRpbyBJbmRpY2F0ZXMgaWYgdGhlIG1ldGhvZCBzaG91bGQgd2FpdCBmb3IgdGhlIGF1ZGlvIGZpbGUgdG8gYmUgZnVsbHkgZ2VuZXJhdGVkIGJlZm9yZSByZXR1cm5pbmcuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIEF1ZGlvSW5mbyBvYmplY3RzIHJlcHJlc2VudGluZyB0aGUgZ2VuZXJhdGVkIHNvbmdzLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNvbmdzKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIGlzQ3VzdG9tOiBib29sZWFuLFxuICAgIHRhZ3M/OiBzdHJpbmcsXG4gICAgdGl0bGU/OiBzdHJpbmcsXG4gICAgbWFrZV9pbnN0cnVtZW50YWw/OiBib29sZWFuLFxuICAgIHdhaXRfYXVkaW86IGJvb2xlYW4gPSBmYWxzZVxuICApOiBQcm9taXNlPEF1ZGlvSW5mb1tdPiB7XG4gICAgYXdhaXQgdGhpcy5rZWVwQWxpdmUoZmFsc2UpO1xuICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHtcbiAgICAgIG1ha2VfaW5zdHJ1bWVudGFsOiBtYWtlX2luc3RydW1lbnRhbCA9PSB0cnVlLFxuICAgICAgbXY6IFwiY2hpcnAtdjMtNVwiLFxuICAgICAgcHJvbXB0OiBcIlwiLFxuICAgIH07XG4gICAgaWYgKGlzQ3VzdG9tKSB7XG4gICAgICBwYXlsb2FkLnRhZ3MgPSB0YWdzO1xuICAgICAgcGF5bG9hZC50aXRsZSA9IHRpdGxlO1xuICAgICAgcGF5bG9hZC5wcm9tcHQgPSBwcm9tcHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBheWxvYWQuZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdCA9IHByb21wdDtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJnZW5lcmF0ZVNvbmdzIHBheWxvYWQ6XFxuXCIgKyBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgIGlzQ3VzdG9tOiBpc0N1c3RvbSxcbiAgICAgIHRhZ3M6IHRhZ3MsXG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICBtYWtlX2luc3RydW1lbnRhbDogbWFrZV9pbnN0cnVtZW50YWwsXG4gICAgICB3YWl0X2F1ZGlvOiB3YWl0X2F1ZGlvLFxuICAgICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgICB9LCBudWxsLCAyKSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5wb3N0KFxuICAgICAgYCR7U3Vub0FwaS5CQVNFX1VSTH0vYXBpL2dlbmVyYXRlL3YyL2AsXG4gICAgICBwYXlsb2FkLFxuICAgICAge1xuICAgICAgICB0aW1lb3V0OiAxMDAwMCwgLy8gMTAgc2Vjb25kcyB0aW1lb3V0XG4gICAgICB9LFxuICAgICk7XG4gICAgbG9nZ2VyLmluZm8oXCJnZW5lcmF0ZVNvbmdzIFJlc3BvbnNlOlxcblwiICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSwgbnVsbCwgMikpO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgcmVzcG9uc2U6XCIgKyByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICB9XG4gICAgY29uc3Qgc29uZ0lkcyA9IHJlc3BvbnNlLmRhdGFbJ2NsaXBzJ10ubWFwKChhdWRpbzogYW55KSA9PiBhdWRpby5pZCk7XG4gICAgLy9XYW50IHRvIHdhaXQgZm9yIG11c2ljIGZpbGUgZ2VuZXJhdGlvblxuICAgIGlmICh3YWl0X2F1ZGlvKSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgbGV0IGxhc3RSZXNwb25zZTogQXVkaW9JbmZvW10gPSBbXTtcbiAgICAgIGF3YWl0IHNsZWVwKDUsIDUpO1xuICAgICAgd2hpbGUgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPCAxMDAwMDApIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldChzb25nSWRzKTtcbiAgICAgICAgY29uc3QgYWxsQ29tcGxldGVkID0gcmVzcG9uc2UuZXZlcnkoXG4gICAgICAgICAgYXVkaW8gPT4gYXVkaW8uc3RhdHVzID09PSAnc3RyZWFtaW5nJyB8fCBhdWRpby5zdGF0dXMgPT09ICdjb21wbGV0ZSdcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFsbENvbXBsZXRlZCkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0UmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgYXdhaXQgc2xlZXAoMywgNik7XG4gICAgICAgIGF3YWl0IHRoaXMua2VlcEFsaXZlKHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxhc3RSZXNwb25zZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5rZWVwQWxpdmUodHJ1ZSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVsnY2xpcHMnXS5tYXAoKGF1ZGlvOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiBhdWRpby5pZCxcbiAgICAgICAgdGl0bGU6IGF1ZGlvLnRpdGxlLFxuICAgICAgICBpbWFnZV91cmw6IGF1ZGlvLmltYWdlX3VybCxcbiAgICAgICAgbHlyaWM6IGF1ZGlvLm1ldGFkYXRhLnByb21wdCxcbiAgICAgICAgYXVkaW9fdXJsOiBhdWRpby5hdWRpb191cmwsXG4gICAgICAgIHZpZGVvX3VybDogYXVkaW8udmlkZW9fdXJsLFxuICAgICAgICBjcmVhdGVkX2F0OiBhdWRpby5jcmVhdGVkX2F0LFxuICAgICAgICBtb2RlbF9uYW1lOiBhdWRpby5tb2RlbF9uYW1lLFxuICAgICAgICBzdGF0dXM6IGF1ZGlvLnN0YXR1cyxcbiAgICAgICAgZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdDogYXVkaW8ubWV0YWRhdGEuZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdCxcbiAgICAgICAgcHJvbXB0OiBhdWRpby5tZXRhZGF0YS5wcm9tcHQsXG4gICAgICAgIHR5cGU6IGF1ZGlvLm1ldGFkYXRhLnR5cGUsXG4gICAgICAgIHRhZ3M6IGF1ZGlvLm1ldGFkYXRhLnRhZ3MsXG4gICAgICAgIGR1cmF0aW9uOiBhdWRpby5tZXRhZGF0YS5kdXJhdGlvbl9mb3JtYXR0ZWQsXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBseXJpY3MgYmFzZWQgb24gYSBnaXZlbiBwcm9tcHQuXG4gICAqIEBwYXJhbSBwcm9tcHQgVGhlIHByb21wdCBmb3IgZ2VuZXJhdGluZyBseXJpY3MuXG4gICAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgbHlyaWNzIHRleHQuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVMeXJpY3MocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGF3YWl0IHRoaXMua2VlcEFsaXZlKGZhbHNlKTtcbiAgICAvLyBJbml0aWF0ZSBseXJpY3MgZ2VuZXJhdGlvblxuICAgIGNvbnN0IGdlbmVyYXRlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5wb3N0KGAke1N1bm9BcGkuQkFTRV9VUkx9L2FwaS9nZW5lcmF0ZS9seXJpY3MvYCwgeyBwcm9tcHQgfSk7XG4gICAgY29uc3QgZ2VuZXJhdGVJZCA9IGdlbmVyYXRlUmVzcG9uc2UuZGF0YS5pZDtcblxuICAgIC8vIFBvbGwgZm9yIGx5cmljcyBjb21wbGV0aW9uXG4gICAgbGV0IGx5cmljc1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KGAke1N1bm9BcGkuQkFTRV9VUkx9L2FwaS9nZW5lcmF0ZS9seXJpY3MvJHtnZW5lcmF0ZUlkfWApO1xuICAgIHdoaWxlIChseXJpY3NSZXNwb25zZT8uZGF0YT8uc3RhdHVzICE9PSAnY29tcGxldGUnKSB7XG4gICAgICBhd2FpdCBzbGVlcCgyKTsgLy8gV2FpdCBmb3IgMiBzZWNvbmRzIGJlZm9yZSBwb2xsaW5nIGFnYWluXG4gICAgICBseXJpY3NSZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LmdldChgJHtTdW5vQXBpLkJBU0VfVVJMfS9hcGkvZ2VuZXJhdGUvbHlyaWNzLyR7Z2VuZXJhdGVJZH1gKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIGdlbmVyYXRlZCBseXJpY3MgdGV4dFxuICAgIHJldHVybiBseXJpY3NSZXNwb25zZS5kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZHMgYW4gZXhpc3RpbmcgYXVkaW8gY2xpcCBieSBnZW5lcmF0aW5nIGFkZGl0aW9uYWwgY29udGVudCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcHJvbXB0LlxuICAgKiBcbiAgICogQHBhcmFtIGF1ZGlvSWQgVGhlIElEIG9mIHRoZSBhdWRpbyBjbGlwIHRvIGV4dGVuZC5cbiAgICogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IGZvciBnZW5lcmF0aW5nIGFkZGl0aW9uYWwgY29udGVudC5cbiAgICogQHBhcmFtIGNvbnRpbnVlQXQgRXh0ZW5kIGEgbmV3IGNsaXAgZnJvbSBhIHNvbmcgYXQgbW06c3MoZS5nLiAwMDozMCkuIERlZmF1bHQgZXh0ZW5kcyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvbmcuXG4gICAqIEBwYXJhbSB0YWdzIFN0eWxlIG9mIE11c2ljLlxuICAgKiBAcGFyYW0gdGl0bGUgVGl0bGUgb2YgdGhlIHNvbmcuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIEF1ZGlvSW5mbyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBleHRlbmRlZCBhdWRpbyBjbGlwLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGV4dGVuZEF1ZGlvKFxuICAgIGF1ZGlvSWQ6IHN0cmluZyxcbiAgICBwcm9tcHQ6IHN0cmluZyA9IFwiXCIsXG4gICAgY29udGludWVBdDogc3RyaW5nID0gXCIwXCIsXG4gICAgdGFnczogc3RyaW5nID0gXCJcIixcbiAgICB0aXRsZTogc3RyaW5nID0gXCJcIlxuICApOiBQcm9taXNlPEF1ZGlvSW5mbz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQucG9zdChgJHtTdW5vQXBpLkJBU0VfVVJMfS9hcGkvZ2VuZXJhdGUvdjIvYCwge1xuICAgICAgY29udGludWVfY2xpcF9pZDogYXVkaW9JZCxcbiAgICAgIGNvbnRpbnVlX2F0OiBjb250aW51ZUF0LFxuICAgICAgbXY6IFwiY2hpcnAtdjMtMFwiLFxuICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICB0YWdzOiB0YWdzLFxuICAgICAgdGl0bGU6IFwiXCJcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgdGhlIGx5cmljcyAocHJvbXB0KSBmcm9tIHRoZSBhdWRpbyBtZXRhZGF0YSBpbnRvIGEgbW9yZSByZWFkYWJsZSBmb3JtYXQuXG4gICAqIEBwYXJhbSBwcm9tcHQgVGhlIG9yaWdpbmFsIGx5cmljcyB0ZXh0LlxuICAgKiBAcmV0dXJucyBUaGUgcHJvY2Vzc2VkIGx5cmljcyB0ZXh0LlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUx5cmljcyhwcm9tcHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQXNzdW1pbmcgdGhlIG9yaWdpbmFsIGx5cmljcyBhcmUgc2VwYXJhdGVkIGJ5IGEgc3BlY2lmaWMgZGVsaW1pdGVyIChlLmcuLCBuZXdsaW5lKSwgd2UgY2FuIGNvbnZlcnQgaXQgaW50byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0LlxuICAgIC8vIFRoZSBpbXBsZW1lbnRhdGlvbiBoZXJlIGNhbiBiZSBhZGp1c3RlZCBhY2NvcmRpbmcgdG8gdGhlIGFjdHVhbCBseXJpY3MgZm9ybWF0LlxuICAgIC8vIEZvciBleGFtcGxlLCBpZiB0aGUgbHlyaWNzIGV4aXN0IGFzIGNvbnRpbnVvdXMgdGV4dCwgaXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHNwbGl0IHRoZW0gYmFzZWQgb24gc3BlY2lmaWMgbWFya2VycyAoc3VjaCBhcyBwZXJpb2RzLCBjb21tYXMsIGV0Yy4pLlxuICAgIC8vIFRoZSBmb2xsb3dpbmcgaW1wbGVtZW50YXRpb24gYXNzdW1lcyB0aGF0IHRoZSBseXJpY3MgYXJlIGFscmVhZHkgc2VwYXJhdGVkIGJ5IG5ld2xpbmVzLlxuXG4gICAgLy8gU3BsaXQgdGhlIGx5cmljcyB1c2luZyBuZXdsaW5lIGFuZCBlbnN1cmUgdG8gcmVtb3ZlIGVtcHR5IGxpbmVzLlxuICAgIGNvbnN0IGxpbmVzID0gcHJvbXB0LnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuXG4gICAgLy8gUmVhc3NlbWJsZSB0aGUgcHJvY2Vzc2VkIGx5cmljcyBsaW5lcyBpbnRvIGEgc2luZ2xlIHN0cmluZywgc2VwYXJhdGVkIGJ5IG5ld2xpbmVzIGJldHdlZW4gZWFjaCBsaW5lLlxuICAgIC8vIEFkZGl0aW9uYWwgZm9ybWF0dGluZyBsb2dpYyBjYW4gYmUgYWRkZWQgaGVyZSwgc3VjaCBhcyBhZGRpbmcgc3BlY2lmaWMgbWFya2VycyBvciBoYW5kbGluZyBzcGVjaWFsIGxpbmVzLlxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYXVkaW8gaW5mb3JtYXRpb24gZm9yIHRoZSBnaXZlbiBzb25nIElEcy5cbiAgICogQHBhcmFtIHNvbmdJZHMgQW4gb3B0aW9uYWwgYXJyYXkgb2Ygc29uZyBJRHMgdG8gcmV0cmlldmUgaW5mb3JtYXRpb24gZm9yLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiBBdWRpb0luZm8gb2JqZWN0cy5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXQoc29uZ0lkcz86IHN0cmluZ1tdKTogUHJvbWlzZTxBdWRpb0luZm9bXT4ge1xuICAgIGF3YWl0IHRoaXMua2VlcEFsaXZlKGZhbHNlKTtcbiAgICBsZXQgdXJsID0gYCR7U3Vub0FwaS5CQVNFX1VSTH0vYXBpL2ZlZWQvYDtcbiAgICBpZiAoc29uZ0lkcykge1xuICAgICAgdXJsID0gYCR7dXJsfT9pZHM9JHtzb25nSWRzLmpvaW4oJywnKX1gO1xuICAgIH1cbiAgICBsb2dnZXIuaW5mbyhcIkdldCBhdWRpbyBzdGF0dXM6IFwiICsgdXJsKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LmdldCh1cmwsIHtcbiAgICAgIC8vIDMgc2Vjb25kcyB0aW1lb3V0XG4gICAgICB0aW1lb3V0OiAzMDAwXG4gICAgfSk7XG5cbiAgICBjb25zdCBhdWRpb3MgPSByZXNwb25zZS5kYXRhO1xuICAgIHJldHVybiBhdWRpb3MubWFwKChhdWRpbzogYW55KSA9PiAoe1xuICAgICAgaWQ6IGF1ZGlvLmlkLFxuICAgICAgdGl0bGU6IGF1ZGlvLnRpdGxlLFxuICAgICAgaW1hZ2VfdXJsOiBhdWRpby5pbWFnZV91cmwsXG4gICAgICBseXJpYzogYXVkaW8ubWV0YWRhdGEucHJvbXB0ID8gdGhpcy5wYXJzZUx5cmljcyhhdWRpby5tZXRhZGF0YS5wcm9tcHQpIDogXCJcIixcbiAgICAgIGF1ZGlvX3VybDogYXVkaW8uYXVkaW9fdXJsLFxuICAgICAgdmlkZW9fdXJsOiBhdWRpby52aWRlb191cmwsXG4gICAgICBjcmVhdGVkX2F0OiBhdWRpby5jcmVhdGVkX2F0LFxuICAgICAgbW9kZWxfbmFtZTogYXVkaW8ubW9kZWxfbmFtZSxcbiAgICAgIHN0YXR1czogYXVkaW8uc3RhdHVzLFxuICAgICAgZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdDogYXVkaW8ubWV0YWRhdGEuZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdCxcbiAgICAgIHByb21wdDogYXVkaW8ubWV0YWRhdGEucHJvbXB0LFxuICAgICAgdHlwZTogYXVkaW8ubWV0YWRhdGEudHlwZSxcbiAgICAgIHRhZ3M6IGF1ZGlvLm1ldGFkYXRhLnRhZ3MsXG4gICAgICBkdXJhdGlvbjogYXVkaW8ubWV0YWRhdGEuZHVyYXRpb25fZm9ybWF0dGVkLFxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgaW5mb3JtYXRpb24gZm9yIGEgc3BlY2lmaWMgYXVkaW8gY2xpcC5cbiAgICogQHBhcmFtIGNsaXBJZCBUaGUgSUQgb2YgdGhlIGF1ZGlvIGNsaXAgdG8gcmV0cmlldmUgaW5mb3JtYXRpb24gZm9yLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgYXVkaW8gY2xpcCBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRDbGlwKGNsaXBJZDogc3RyaW5nKTogUHJvbWlzZTxvYmplY3Q+IHtcbiAgICBhd2FpdCB0aGlzLmtlZXBBbGl2ZShmYWxzZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXQoYCR7U3Vub0FwaS5CQVNFX1VSTH0vYXBpL2NsaXAvJHtjbGlwSWR9YCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0X2NyZWRpdHMoKTogUHJvbWlzZTxvYmplY3Q+IHtcbiAgICBhd2FpdCB0aGlzLmtlZXBBbGl2ZShmYWxzZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXQoYCR7U3Vub0FwaS5CQVNFX1VSTH0vYXBpL2JpbGxpbmcvaW5mby9gKTtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlZGl0c19sZWZ0OiByZXNwb25zZS5kYXRhLnRvdGFsX2NyZWRpdHNfbGVmdCxcbiAgICAgIHBlcmlvZDogcmVzcG9uc2UuZGF0YS5wZXJpb2QsXG4gICAgICBtb250aGx5X2xpbWl0OiByZXNwb25zZS5kYXRhLm1vbnRobHlfbGltaXQsXG4gICAgICBtb250aGx5X3VzYWdlOiByZXNwb25zZS5kYXRhLm1vbnRobHlfdXNhZ2UsXG4gICAgfTtcbiAgfVxufVxuXG5jb25zdCBuZXdTdW5vQXBpID0gYXN5bmMgKGNvb2tpZTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHN1bm9BcGkgPSBuZXcgU3Vub0FwaShjb29raWUpO1xuICByZXR1cm4gYXdhaXQgc3Vub0FwaS5pbml0KCk7XG59XG5cbmlmICghcHJvY2Vzcy5lbnYuU1VOT19DT09LSUUpIHtcbiAgY29uc29sZS5sb2coXCJFbnZpcm9ubWVudCBkb2VzIG5vdCBjb250YWluIFNVTk9fQ09PS0lFLlwiLCBwcm9jZXNzLmVudilcbn1cblxuZXhwb3J0IGNvbnN0IHN1bm9BcGkgPSBuZXdTdW5vQXBpKHByb2Nlc3MuZW52LlNVTk9fQ09PS0lFIHx8ICcnKTtcbiJdLCJuYW1lcyI6WyJheGlvcyIsIlVzZXJBZ2VudCIsInBpbm8iLCJ3cmFwcGVyIiwiQ29va2llSmFyIiwic2xlZXAiLCJsb2dnZXIiLCJTdW5vQXBpIiwiQkFTRV9VUkwiLCJDTEVSS19CQVNFX1VSTCIsImNvbnN0cnVjdG9yIiwiY29va2llIiwiY29va2llSmFyIiwicmFuZG9tVXNlckFnZW50IiwicmFuZG9tIiwidG9TdHJpbmciLCJjbGllbnQiLCJjcmVhdGUiLCJqYXIiLCJ3aXRoQ3JlZGVudGlhbHMiLCJoZWFkZXJzIiwiaW50ZXJjZXB0b3JzIiwicmVxdWVzdCIsInVzZSIsImNvbmZpZyIsImN1cnJlbnRUb2tlbiIsImluaXQiLCJnZXRBdXRoVG9rZW4iLCJrZWVwQWxpdmUiLCJnZXRTZXNzaW9uVXJsIiwic2Vzc2lvblJlc3BvbnNlIiwiZ2V0IiwiZGF0YSIsInJlc3BvbnNlIiwiRXJyb3IiLCJzaWQiLCJpc1dhaXQiLCJyZW5ld1VybCIsInJlbmV3UmVzcG9uc2UiLCJwb3N0IiwiaW5mbyIsIm5ld1Rva2VuIiwiY29uc29sZSIsImxvZyIsImdlbmVyYXRlIiwicHJvbXB0IiwibWFrZV9pbnN0cnVtZW50YWwiLCJ3YWl0X2F1ZGlvIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImF1ZGlvcyIsImdlbmVyYXRlU29uZ3MiLCJ1bmRlZmluZWQiLCJjb3N0VGltZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25jYXRlbmF0ZSIsImNsaXBfaWQiLCJwYXlsb2FkIiwidGltZW91dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjdXN0b21fZ2VuZXJhdGUiLCJ0YWdzIiwidGl0bGUiLCJpc0N1c3RvbSIsIm12IiwiZ3B0X2Rlc2NyaXB0aW9uX3Byb21wdCIsInNvbmdJZHMiLCJtYXAiLCJhdWRpbyIsImlkIiwibGFzdFJlc3BvbnNlIiwiYWxsQ29tcGxldGVkIiwiZXZlcnkiLCJpbWFnZV91cmwiLCJseXJpYyIsIm1ldGFkYXRhIiwiYXVkaW9fdXJsIiwidmlkZW9fdXJsIiwiY3JlYXRlZF9hdCIsIm1vZGVsX25hbWUiLCJ0eXBlIiwiZHVyYXRpb24iLCJkdXJhdGlvbl9mb3JtYXR0ZWQiLCJnZW5lcmF0ZUx5cmljcyIsImdlbmVyYXRlUmVzcG9uc2UiLCJnZW5lcmF0ZUlkIiwibHlyaWNzUmVzcG9uc2UiLCJleHRlbmRBdWRpbyIsImF1ZGlvSWQiLCJjb250aW51ZUF0IiwiY29udGludWVfY2xpcF9pZCIsImNvbnRpbnVlX2F0IiwicGFyc2VMeXJpY3MiLCJsaW5lcyIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsInRyaW0iLCJqb2luIiwidXJsIiwiZ2V0Q2xpcCIsImNsaXBJZCIsImdldF9jcmVkaXRzIiwiY3JlZGl0c19sZWZ0IiwidG90YWxfY3JlZGl0c19sZWZ0IiwicGVyaW9kIiwibW9udGhseV9saW1pdCIsIm1vbnRobHlfdXNhZ2UiLCJuZXdTdW5vQXBpIiwic3Vub0FwaSIsInByb2Nlc3MiLCJlbnYiLCJTVU5PX0NPT0tJRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/SunoApi.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   corsHeaders: () => (/* binding */ corsHeaders),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ \"(rsc)/./node_modules/pino/pino.js\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);\n\nconst logger = pino__WEBPACK_IMPORTED_MODULE_0___default()();\n/**\n * Pause for a specified number of seconds.\n * @param x Minimum number of seconds.\n * @param y Maximum number of seconds (optional).\n */ const sleep = (x, y)=>{\n    let timeout = x * 1000;\n    if (y !== undefined && y !== x) {\n        const min = Math.min(x, y);\n        const max = Math.max(x, y);\n        timeout = Math.floor(Math.random() * (max - min + 1) + min) * 1000;\n    }\n    // console.log(`Sleeping for ${timeout / 1000} seconds`);\n    logger.info(`Sleeping for ${timeout / 1000} seconds`);\n    return new Promise((resolve)=>setTimeout(resolve, timeout));\n};\nconst corsHeaders = {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, OPTIONS\",\n    \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0I7QUFFeEIsTUFBTUMsU0FBU0QsMkNBQUlBO0FBRW5COzs7O0NBSUMsR0FDTSxNQUFNRSxRQUFRLENBQUNDLEdBQVdDO0lBQy9CLElBQUlDLFVBQVVGLElBQUk7SUFDbEIsSUFBSUMsTUFBTUUsYUFBYUYsTUFBTUQsR0FBRztRQUM5QixNQUFNSSxNQUFNQyxLQUFLRCxHQUFHLENBQUNKLEdBQUdDO1FBQ3hCLE1BQU1LLE1BQU1ELEtBQUtDLEdBQUcsQ0FBQ04sR0FBR0M7UUFDeEJDLFVBQVVHLEtBQUtFLEtBQUssQ0FBQ0YsS0FBS0csTUFBTSxLQUFNRixDQUFBQSxNQUFNRixNQUFNLEtBQUtBLE9BQU87SUFDaEU7SUFDQSx5REFBeUQ7SUFDekROLE9BQU9XLElBQUksQ0FBQyxDQUFDLGFBQWEsRUFBRVAsVUFBVSxLQUFLLFFBQVEsQ0FBQztJQUVwRCxPQUFPLElBQUlRLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNUO0FBQ3BELEVBQUM7QUFHTSxNQUFNVyxjQUFjO0lBQ3pCLCtCQUErQjtJQUMvQixnQ0FBZ0M7SUFDaEMsZ0NBQWdDO0FBQ2xDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdW5vLWFwaS8uL3NyYy9saWIvdXRpbHMudHM/N2MxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGlubyBmcm9tIFwicGlub1wiO1xuXG5jb25zdCBsb2dnZXIgPSBwaW5vKCk7XG5cbi8qKlxuICogUGF1c2UgZm9yIGEgc3BlY2lmaWVkIG51bWJlciBvZiBzZWNvbmRzLlxuICogQHBhcmFtIHggTWluaW11bSBudW1iZXIgb2Ygc2Vjb25kcy5cbiAqIEBwYXJhbSB5IE1heGltdW0gbnVtYmVyIG9mIHNlY29uZHMgKG9wdGlvbmFsKS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNsZWVwID0gKHg6IG51bWJlciwgeT86IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBsZXQgdGltZW91dCA9IHggKiAxMDAwO1xuICBpZiAoeSAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHgpIHtcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbih4LCB5KTtcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heCh4LCB5KTtcbiAgICB0aW1lb3V0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKSAqIDEwMDA7XG4gIH1cbiAgLy8gY29uc29sZS5sb2coYFNsZWVwaW5nIGZvciAke3RpbWVvdXQgLyAxMDAwfSBzZWNvbmRzYCk7XG4gIGxvZ2dlci5pbmZvKGBTbGVlcGluZyBmb3IgJHt0aW1lb3V0IC8gMTAwMH0gc2Vjb25kc2ApO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dCkpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBjb3JzSGVhZGVycyA9IHtcbiAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycsXG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicsXG59Il0sIm5hbWVzIjpbInBpbm8iLCJsb2dnZXIiLCJzbGVlcCIsIngiLCJ5IiwidGltZW91dCIsInVuZGVmaW5lZCIsIm1pbiIsIk1hdGgiLCJtYXgiLCJmbG9vciIsInJhbmRvbSIsImluZm8iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjb3JzSGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/axios","vendor-chunks/next","vendor-chunks/pino","vendor-chunks/asynckit","vendor-chunks/tough-cookie","vendor-chunks/http-cookie-agent","vendor-chunks/fast-redact","vendor-chunks/pino-std-serializers","vendor-chunks/thread-stream","vendor-chunks/debug","vendor-chunks/psl","vendor-chunks/mime-db","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/agent-base","vendor-chunks/sonic-boom","vendor-chunks/user-agents","vendor-chunks/url-parse","vendor-chunks/universalify","vendor-chunks/supports-color","vendor-chunks/safe-stable-stringify","vendor-chunks/requires-port","vendor-chunks/quick-format-unescaped","vendor-chunks/querystringify","vendor-chunks/punycode","vendor-chunks/proxy-from-env","vendor-chunks/on-exit-leak-free","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/has-flag","vendor-chunks/delayed-stream","vendor-chunks/combined-stream","vendor-chunks/axios-cookiejar-support","vendor-chunks/atomic-sleep"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustom_generate%2Froute&page=%2Fapi%2Fcustom_generate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustom_generate%2Froute.ts&appDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbikramsutar%2FDesktop%2Fworkspace%2Fhackathon%2Fbackend%2Fservers%2Fsuno-ai-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();